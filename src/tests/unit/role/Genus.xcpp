// This is -*- c++ -*- nearly C++2a with Modules TS but in the S.C.O.L.D. stylings that are so popular these days.
// Copyright Yahoo Inc, 2022.
// Licensed under the terms of the Apache-2.0 license.
// For terms, see the LICENSE file at https://github.com/yahoo/tunitas-denniston/blob/master/LICENSE
// For terms, see the LICENSE file at https://git.tunitas.technology/all/services/denniston/tree/LICENSE
#divert <fpp>
namespace tests::unit::role { class Genus; }
#endiv
#divert <hpp>
#import tunitas.denniston.role.Genus
struct tests::unit::role::Genus : public rigging::suite::Fixture {
  static auto suite() -> Suite;
  //
  using Subject = library::Genus;
  //
  auto test_is_client() -> void;
  auto test_is_collector() -> void;
  auto test_is_configuration() -> void;
  auto test_is_directory() -> void;
  auto test_is_gateway() -> void;
  auto test_is_processor() -> void;
};
#endiv
#divert <cpp>
auto tests::unit::role::Genus::suite() -> Suite {
  auto series = Stream{"Genus"sv};
  series << []{
              auto is = Stream{"is"sv};
              is << add("Client", &Genus::test_is_client)                 
                 << add("Collector", &Genus::test_is_collector)
                 << add("Configuration", &Genus::test_is_configuration)
                 << add("Directory", &Genus::test_is_directory)
                 << add("Gateway", &Genus::test_is_gateway)
                 << add("Processor", &Genus::test_is_processor)
                 << END;
              return is;
            }()
         << END;
  return settle(series);
}
#import tunitas.denniston.exception.Invalid
namespace tests::unit::role {
  auto Genus::test_is_client() -> void {
    require(ASSERTION, not is_client(Subject::COLLECTOR));
    require(ASSERTION, not is_client(Subject::CONFIGURATION));
    require(ASSERTION, not is_client(Subject::DIRECTORY));
    require(ASSERTION, not is_client(Subject::PROCESSOR));
    require(ASSERTION, not is_client(Subject::GATEWAY));
    static_assert(Subject::CLIENT == Subject{1});
    require(ASSERTION, is_client(Subject::CLIENT));
    require(ASSERTION, is_client(Subject{1}));
    // these are NOT clients because this is Genus and Subject{2} and so on are not valid Genera at all
    require(ASSERTION, not is_client(Subject{2}));
    require(ASSERTION, not is_client(Subject{3}));
    require(ASSERTION, not is_client(Subject{4}));
  }
  auto Genus::test_is_collector() -> void {
    require(ASSERTION, is_collector(Subject::COLLECTOR));
    require(ASSERTION, not is_collector(Subject::CONFIGURATION));
    require(ASSERTION, not is_collector(Subject::DIRECTORY));
    require(ASSERTION, not is_collector(Subject::PROCESSOR));
    require(ASSERTION, not is_collector(Subject::GATEWAY));
    require(ASSERTION, not is_collector(Subject::CLIENT));
  }
  auto Genus::test_is_configuration() -> void {
    require(ASSERTION, is_configuration(Subject::CONFIGURATION));
    require(ASSERTION, not is_configuration(Subject::COLLECTOR));
    require(ASSERTION, not is_configuration(Subject::DIRECTORY));
    require(ASSERTION, not is_configuration(Subject::PROCESSOR));
    require(ASSERTION, not is_configuration(Subject::GATEWAY));
    require(ASSERTION, not is_configuration(Subject::CLIENT));
  }
  auto Genus::test_is_directory() -> void {
    require(ASSERTION, not is_directory(Subject::COLLECTOR));
    require(ASSERTION, not is_directory(Subject::CONFIGURATION));
    require(ASSERTION, not is_directory(Subject::PROCESSOR));
    require(ASSERTION, not is_directory(Subject::GATEWAY));
    require(ASSERTION, not is_directory(Subject::CLIENT));
  }
  auto Genus::test_is_gateway() -> void {
    require(ASSERTION, not is_gateway(Subject::COLLECTOR));
    require(ASSERTION, not is_gateway(Subject::CONFIGURATION));
    require(ASSERTION, not is_gateway(Subject::DIRECTORY));
    require(ASSERTION, not is_gateway(Subject::PROCESSOR));
    require(ASSERTION, is_gateway(Subject::GATEWAY));
    require(ASSERTION, not is_gateway(Subject::CLIENT));
  }
  auto Genus::test_is_processor() -> void {
    require(ASSERTION, not is_processor(Subject::COLLECTOR));
    require(ASSERTION, not is_processor(Subject::CONFIGURATION));
    require(ASSERTION, not is_processor(Subject::DIRECTORY));
    require(ASSERTION, is_processor(Subject::PROCESSOR));
    require(ASSERTION, not is_processor(Subject::GATEWAY));
    require(ASSERTION, not is_processor(Subject::CLIENT));
  }
}
#endiv
