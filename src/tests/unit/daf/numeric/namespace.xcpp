// This is -*- c++ -*- nearly C++23 with Modules TS but in the S.C.O.L.D. stylings that are so popular these days.
// Copyright Yahoo Inc.
// Licensed under the terms of the Apache-2.0 license.
// For terms, see the LICENSE file at https://github.com/yahoo/tunitas-keyston/blob/master/LICENSE
// For terms, see the LICENSE file at https://git.tunitas.technology/all/components/keyston/tree/LICENSE
#divert <fpp>
#import tests.unit.daf
#import tunitas.keyston.Scheme
#import tunitas.keyston.Slice
#import tunitas.keyston.Shards
#import tunitas.keyston.shards.literals
#import tunitas.array.Series
#import tunitas.keyston.field.Element
#import tunitas.keyston.measurement.Specimen
#import tunitas.keyston.aggregation.Count
#import tunitas.keyston.quantity.Records
#import tunitas.keyston.daf.Parameters
#import tunitas.keyston.daf.Measurement
#import tunitas.keyston.daf.Input
#import tunitas.keyston.daf.Public
#import tunitas.keyston.daf.Output
#import tunitas.keyston.daf.Aggregation
namespace tests::unit::daf::numeric {
  using namespace ::tunitas::keyston::shards::literals;
  using ::tunitas::keyston::field::Element;
  template<::tunitas::keyston::shards::required::Shardable TYPE> using Shards = ::tunitas::keyston::Shards<TYPE>;
  template<::tunitas::array::required::Arrayable TYPE> using Series = ::tunitas::array::Series<TYPE>;
  using enum ::tunitas::keyston::Scheme;
  using ::tunitas::keyston::Slice;
  using enum ::tunitas::keyston::Slice;
  using ::tunitas::keyston::measurement::Specimen;
  //
  using Processed = ::tunitas::keyston::quantity::Records;
  // NOT ---> using Randomness = ::tunitas::keyston::daf::function::Prototype::Randomness; // [[FIXTHIS]] find a better source for this
  //
  using ::tunitas::keyston::daf::Parameters;
  using ::tunitas::keyston::daf::Measurement;
  using ::tunitas::keyston::daf::Input;
  using ::tunitas::keyston::daf::Public;
  using ::tunitas::keyston::daf::Output;
  using ::tunitas::keyston::daf::Aggregation;
  namespace [[nodirectory]] defaults { }
  namespace [[nodirectory]] zero       { }
  namespace [[nodirectory]] constant   { }
  namespace [[nodirectory]] count      { }
  namespace [[nodirectory]] sum        { }
  namespace [[nodirectory]] histogram  { }
  namespace [[nodirectory]] popularity { }
}
#endiv
#divert <hpp>
#import tunitas.keyston.nonce.Bits
#import nonstd.uint128_t
#import nonstd.int128.ostream
#import std.numeric_limits
namespace tests::unit::daf::numeric {
  using nonstd::int128::operator<<; // for the lulz (debugging) and the convenience.
  namespace defaults {
    // have some "randomness" which gives bits in the full 16 bytes of the randomness.
    inline constexpr auto RANDOMNESS = ::tunitas::keyston::nonce::Bits<128>{(nonstd::uint128_t{0x0'fedc'ba98'7654'3210llu} << 64) | nonstd::uint128_t{0x0'0123'4567'89ab'cdefllu}};
    // selfcheck: if the high-64 bits equal the low-64 bits then the test is moot (tests nothing
    static_assert((RANDOMNESS.value >> 64) != (RANDOMNESS.value & std::numeric_limits<std::uint64_t>::max()));
  }
}
#endiv
